document.addEventListener("DOMContentLoaded", function () {
  const treeviewToggles = document.querySelectorAll('[data-widget="treeview"] .nav-link');

  treeviewToggles.forEach(link => {
    link.addEventListener("click", function (e) {
      const parent = this.parentElement;
      const submenu = this.nextElementSibling;

      if (submenu && submenu.classList.contains("nav-treeview")) {
        e.preventDefault();

        const isOpen = parent.classList.contains("menu-open");

        // Cierra todos los demás submenús
        const allMenus = document.querySelectorAll(".nav-item.has-treeview.menu-open");
        allMenus.forEach(menu => {
          menu.classList.remove("menu-open");
          const submenu = menu.querySelector(".nav-treeview");
          if (submenu) submenu.style.display = "none";
        });

        // Abre/cierra el submenu actual
        if (!isOpen) {
          parent.classList.add("menu-open");
          submenu.style.display = "block";
        } else {
          parent.classList.remove("menu-open");
          submenu.style.display = "none";
        }
      }
    });
  });
});